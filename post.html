<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DYGKTNNN1P"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DYGKTNNN1P');
</script>

<title>Post - Ryan's Poetic and Literary Insights</title>
<meta name="description" content="Read the full post on Ryan's Poetic and Literary Insights">
<meta name="author" content="Ryan">
<meta name="robots" content="index, follow">

<link rel="preconnect" href="https://zqmgtnnwrceagkshfapq.supabase.co">
<link rel="dns-prefetch" href="https://zqmgtnnwrceagkshfapq.supabase.co">

<style>
:root{
  --bg-gradient-start:#667eea;
  --bg-gradient-end:#764ba2;
  --card-bg:#ffffff;
  --text-primary:#333333;
  --text-secondary:#666666;
  --text-muted:#999999;
  --border-color:#ddd;
  --shadow:rgba(0,0,0,0.2);
  --accent-blue:#667eea;
  --accent-red:#ff6b6b;
}

[data-theme="dark"]{
  --bg-gradient-start:#1a1a2e;
  --bg-gradient-end:#16213e;
  --card-bg:#2a2a3e;
  --text-primary:#e0e0e0;
  --text-secondary:#b0b0b0;
  --text-muted:#808080;
  --border-color:#444;
  --shadow:rgba(0,0,0,0.5);
  --accent-blue:#7d8ef5;
  --accent-red:#ff8787;
}

*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Georgia',serif;background:linear-gradient(135deg,var(--bg-gradient-start),var(--bg-gradient-end));color:var(--text-primary);line-height:1.6;min-height:100vh;transition:background 0.3s ease}
.container{max-width:900px;margin:0 auto;padding:20px}
.theme-toggle{position:fixed;top:20px;right:20px;width:50px;height:50px;background:rgba(255,255,255,0.2);border:2px solid white;color:white;cursor:pointer;border-radius:50%;z-index:100;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;font-size:1.5em}
.theme-toggle:hover{background:rgba(255,255,255,0.3);transform:rotate(20deg)}
.breadcrumb{color:rgba(255,255,255,0.9);padding:20px 0;font-size:0.9em}
.breadcrumb a{color:white;text-decoration:none;border-bottom:1px solid rgba(255,255,255,0.3);transition:opacity 0.3s}
.breadcrumb a:hover{opacity:0.7}
.post-content{background:var(--card-bg);border-radius:20px;padding:50px;box-shadow:0 10px 40px var(--shadow);margin:30px 0}
.post-title{color:var(--accent-blue);font-size:3em;margin-bottom:20px;line-height:1.2}
.post-meta{color:var(--text-muted);font-size:0.95em;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid var(--border-color)}
.post-body{color:var(--text-primary);font-size:1.2em;line-height:1.9;white-space:pre-wrap;word-wrap:break-word}
.post-content.poem{font-style:italic;background:linear-gradient(135deg,#ffecd2,#fcb69f);border-left:5px solid var(--accent-red)}
[data-theme="dark"] .post-content.poem{background:linear-gradient(135deg,#3a2a1e,#2e1f14)}
.post-content.poem .post-title{color:var(--accent-red)}
.back-btn{display:inline-block;padding:15px 30px;background:var(--accent-blue);color:white;text-decoration:none;border-radius:30px;margin-top:30px;transition:all 0.3s ease;font-weight:bold}
.back-btn:hover{background:#5568d3;transform:translateY(-2px)}
.loading-container{color:white;text-align:center;padding:100px 20px;font-size:1.2em}
.spinner{border:4px solid rgba(255,255,255,0.3);border-radius:50%;border-top:4px solid white;width:50px;height:50px;animation:spin 1s linear infinite;margin:20px auto}
@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.error-state{color:white;text-align:center;padding:100px 20px;background:rgba(255,255,255,0.1);border-radius:15px;margin:50px 0}
.error-state h2{font-size:2em;margin-bottom:15px}
.success,.error{position:fixed;top:20px;left:50%;transform:translateX(-50%);padding:15px 30px;border-radius:8px;color:white;z-index:3000;font-weight:bold;box-shadow:0 5px 20px rgba(0,0,0,0.3);animation:slideDown 0.3s ease}
.success{background:#2ecc71}
.error{background:#e74c3c}
@keyframes slideDown{from{top:-100px;opacity:0}to{top:20px;opacity:1}}

.share-section{margin:40px 0;padding:30px;background:rgba(255,255,255,0.1);border-radius:15px;text-align:center}
.share-title{color:white;font-size:1.3em;margin-bottom:20px;font-weight:bold}
.share-buttons{display:flex;justify-content:center;gap:15px;flex-wrap:wrap}
.share-btn{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;border-radius:30px;text-decoration:none;color:white;font-weight:bold;font-size:0.95em;transition:all 0.3s ease;border:none;cursor:pointer}
.share-btn:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,0,0,0.3)}
.share-btn.twitter{background:#1DA1F2}
.share-btn.twitter:hover{background:#0d8bd9}
.share-btn.facebook{background:#1877F2}
.share-btn.facebook:hover{background:#0d65d9}
.share-btn.linkedin{background:#0A66C2}
.share-btn.linkedin:hover{background:#084d91}
.share-btn.reddit{background:#FF4500}
.share-btn.reddit:hover{background:#e03d00}
.share-btn.email{background:#EA4335}
.share-btn.email:hover{background:#d33426}
.share-btn.copy{background:#667eea}
.share-btn.copy:hover{background:#5568d3}
.share-btn.whatsapp{background:#25D366}
.share-btn.whatsapp:hover{background:#1ebe57}
.share-btn svg{width:18px;height:18px;fill:currentColor}

.comments-section{margin-top:60px;padding-top:40px;border-top:2px solid rgba(255,255,255,0.2)}
.comments-title{color:white;font-size:2em;margin-bottom:30px}
.comment-form{background:var(--card-bg);padding:30px;border-radius:15px;margin-bottom:30px}
.comment-form h3{color:var(--accent-blue);margin-bottom:20px}
.form-group{margin-bottom:15px}
.form-group label{display:block;margin-bottom:8px;font-weight:bold;color:var(--text-primary)}
.form-group input,.form-group textarea{width:100%;padding:12px;border-radius:8px;border:2px solid var(--border-color);font-family:inherit;font-size:1em;background:var(--card-bg);color:var(--text-primary);transition:border-color 0.3s}
.form-group input:focus,.form-group textarea:focus{outline:none;border-color:var(--accent-blue)}
.form-group textarea{min-height:120px;resize:vertical}
.submit-btn{padding:15px 30px;background:var(--accent-blue);color:white;border:none;border-radius:8px;cursor:pointer;font-size:1em;font-weight:bold;transition:all 0.3s ease}
.submit-btn:hover{background:#5568d3;transform:translateY(-2px)}
.comment-item{background:var(--card-bg);padding:25px;border-radius:15px;margin-bottom:20px;box-shadow:0 5px 15px var(--shadow)}
.comment-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;flex-wrap:wrap;gap:10px}
.comment-author{color:var(--accent-blue);margin:0;font-size:1.2em}
.comment-date{color:var(--text-muted);font-size:0.9em}
.comment-content{color:var(--text-primary);line-height:1.8;margin:0;white-space:pre-wrap;word-wrap:break-word}
.no-comments{color:white;text-align:center;padding:40px;background:rgba(255,255,255,0.1);border-radius:15px}
.comments-error{color:#e74c3c;text-align:center;padding:20px;background:rgba(231,76,60,0.1);border-radius:15px}

@media(max-width:768px){
    .container{padding:15px}
    .post-content{padding:30px 20px}
    .post-title{font-size:2em}
    .post-body{font-size:1.1em}
    .comment-form{padding:20px}
    .theme-toggle{top:10px;right:10px}
    .share-buttons{gap:10px}
    .share-btn{padding:10px 18px;font-size:0.9em}
    .share-section{padding:20px}
}
</style>
</head>
<body>
<button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">üåô</button>

<div class="container">
<nav class="breadcrumb" aria-label="Breadcrumb">
  <a href="https://poeticandliteraryinsights.com/">‚Üê Back to Home</a>
</nav>

<main id="post-container">
<noscript>
  <article class="post-content">
    <h1 class="post-title">Poetry and Literary Insights</h1>
    <div class="post-meta">A collection of poems and articles exploring life, love, and human connection</div>
    <div class="post-body">
      Welcome to Ryan's Poetic and Literary Insights. This site features original poetry and literary articles about emotional reflection, unrequited love, self-discovery, and the complexities of human relationships. 
      
      Each piece is crafted to resonate with readers seeking depth, authenticity, and emotional clarity through words.
      
      Topics include: one-sided love, emotional detachment, quiet loneliness, finding yourself after heartbreak, inner growth, and the beauty of human connection.
      
      JavaScript is required to view the full post. Please enable JavaScript for the complete experience.
    </div>
  </article>
</noscript>
<div class="loading-container">
<div class="spinner"></div>
<p>Loading post...</p>
</div>
</main>

<div id="share-section" class="share-section" style="display:none">
  <h3 class="share-title">Share this post</h3>
  <div class="share-buttons">
    <a href="#" class="share-btn twitter" onclick="shareOnTwitter(event)" aria-label="Share on Twitter">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
      Twitter
    </a>
    <a href="#" class="share-btn facebook" onclick="shareOnFacebook(event)" aria-label="Share on Facebook">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
      Facebook
    </a>
    <a href="#" class="share-btn linkedin" onclick="shareOnLinkedIn(event)" aria-label="Share on LinkedIn">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
      LinkedIn
    </a>
    <a href="#" class="share-btn reddit" onclick="shareOnReddit(event)" aria-label="Share on Reddit">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>
      Reddit
    </a>
    <a href="#" class="share-btn email" onclick="shareViaEmail(event)" aria-label="Share via Email">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
      Email
    </a>
    <a href="#" class="share-btn whatsapp" onclick="shareOnWhatsApp(event)" aria-label="Share on WhatsApp">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
      WhatsApp
    </a>
    <button class="share-btn copy" onclick="copyLink()" aria-label="Copy link">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
      Copy Link
    </button>
  </div>
</div>

<section id="comments-section" class="comments-section" style="display:none">
<h2 class="comments-title">Comments</h2>

<div class="comment-form">
<h3>Leave a Comment</h3>
<div class="form-group">
<label for="comment-name">Name:</label>
<input type="text" id="comment-name" placeholder="Your name" maxlength="100">
</div>
<div class="form-group">
<label for="comment-content">Comment:</label>
<textarea id="comment-content" placeholder="Write your comment..." maxlength="1000"></textarea>
</div>
<button class="submit-btn" onclick="submitComment()">Post Comment</button>
</div>

<div id="comments-list"></div>
</section>

<a href="https://poeticandliteraryinsights.com/" class="back-btn" id="back-btn" style="display:none">‚Üê Back to All Posts</a>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" async defer></script>
<script>
// SEO Optimization: Detect crawlers and optimize rendering
const isBot = /bot|crawler|spider|crawling|googlebot|bingbot/i.test(navigator.userAgent);

const SUPABASE_URL="https://zqmgtnnwrceagkshfapq.supabase.co";
const SUPABASE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpxbWd0bm53cmNlYWdrc2hmYXBxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY3MDI2ODgsImV4cCI6MjA4MjI3ODY4OH0.Ql5KP6nfOSRzz1Z2eyN6WTqDsfVwZ0e9GKIbePa9eZE";

let sb;
let currentPostId=null;
let currentPostData=null;

function loadTheme(){
    const theme=localStorage.getItem('theme')||'light';
    document.documentElement.setAttribute('data-theme',theme);
    document.querySelector('.theme-toggle').textContent=theme==='dark'?'‚òÄÔ∏è':'üåô';
}

function toggleTheme(){
    const current=document.documentElement.getAttribute('data-theme')||'light';
    const next=current==='light'?'dark':'light';
    document.documentElement.setAttribute('data-theme',next);
    localStorage.setItem('theme',next);
    document.querySelector('.theme-toggle').textContent=next==='dark'?'‚òÄÔ∏è':'üåô';
}

function escapeHtml(text){
    const div=document.createElement('div');
    div.textContent=text;
    return div.innerHTML;
}

function formatDate(dateString){
    if(!dateString)return'';
    const date=new Date(dateString);
    if(isNaN(date.getTime()))return'';
    return date.toLocaleDateString('en-US',{
        timeZone:'UTC',
        year:'numeric',
        month:'long',
        day:'numeric'
    });
}

function formatCommentDate(dateString){
    if(!dateString)return'';
    const date=new Date(dateString);
    if(isNaN(date.getTime()))return'';
    return date.toLocaleDateString('en-US',{
        year:'numeric',
        month:'long',
        day:'numeric',
        hour:'2-digit',
        minute:'2-digit'
    });
}

function initSupabase(){
    if(window.supabase){
        sb=window.supabase.createClient(SUPABASE_URL,SUPABASE_KEY);
        loadPost();
    }else{
        setTimeout(initSupabase,100);
    }
}

async function loadPost(){
    const urlParams=new URLSearchParams(window.location.search);
    const id=urlParams.get('id');
    
    if(!id){
        document.getElementById('post-container').innerHTML=
            '<div class="error-state"><h2>Post Not Found</h2><p>The post you\'re looking for doesn\'t exist.</p></div>';
        document.getElementById('back-btn').style.display='inline-block';
        return;
    }
    
    currentPostId=id;
    
    try{
        const CACHE_PREFIX='post_';
        const CACHE_DURATION = 2*60*60*1000; // 2 hours
        let post=null;
        
        // Clear loading state early for better perceived performance
        const postContainer=document.getElementById('post-container');
        const loadingContainer = postContainer.querySelector('.loading-container');
        
        try{
            const cached=localStorage.getItem(CACHE_PREFIX+id);
            if(cached){
                const{data,timestamp}=JSON.parse(cached);
                if(Date.now()-timestamp<CACHE_DURATION){
                    post=data;
                }
            }
        }catch(e){}
        
        if(!post){
            const{data,error}=await Promise.race([
                sb.from('posts').select('*').eq('id',id).single(),
                new Promise((_,reject)=>setTimeout(()=>reject(new Error('Timeout')),4000))
            ]);
            if(error)throw error;
            post=data;
            
            try{
                localStorage.setItem(CACHE_PREFIX+id,JSON.stringify({data:post,timestamp:Date.now()}));
            }catch(e){}
        }
        
        if(!post){
            throw new Error('Post not found');
        }
        
        currentPostData=post;
        
        const formattedDate=formatDate(post.created_at);
        
        const postContainer=document.getElementById('post-container');
        
        // Remove loading state
        const loadingContainer = postContainer.querySelector('.loading-container');
        if (loadingContainer) {
            loadingContainer.remove();
        }
        
        postContainer.innerHTML=`
            <article class="post-content ${post.type}" itemscope itemtype="https://schema.org/BlogPosting">
                <h1 class="post-title" itemprop="headline">${escapeHtml(post.title)}</h1>
                ${formattedDate?`<div class="post-meta">
                    <time itemprop="datePublished" datetime="${post.created_at}">
                        Published on ${formattedDate}
                    </time>
                    <meta itemprop="author" content="Ryan">
                </div>`:''}
                <div class="post-body" itemprop="articleBody">${escapeHtml(post.content)}</div>
            </article>
        `;
        
        document.title=`${post.title} - Ryan's Poetic and Literary Insights`;
        
        const metaDesc=document.querySelector('meta[name="description"]');
        if(metaDesc){
            metaDesc.setAttribute('content',post.content.substring(0,150)+'...');
        }
        
        document.getElementById('back-btn').style.display='inline-block';
        document.getElementById('share-section').style.display='block';
        document.getElementById('comments-section').style.display='block';
        
        // OPTIMIZATION: Load comments in parallel (don't block post rendering)
        loadComments();
        
    }catch(err){
        console.error('Error loading post:',err);
        document.getElementById('post-container').innerHTML=
            '<div class="error-state"><h2>Error Loading Post</h2><p>Unable to load the post. Please try again later.</p></div>';
        document.getElementById('back-btn').style.display='inline-block';
    }
}

async function loadComments(){
    if(!currentPostId)return;
    
    try{
        const{data,error}=await sb
            .from('comments')
            .select('*')
            .eq('post_id',currentPostId)
            .order('created_at',{ascending:false});
        
        if(error)throw error;
        
        const commentsList=document.getElementById('comments-list');
        
        if(!data||data.length===0){
            commentsList.innerHTML='<div class="no-comments">No comments yet. Be the first to comment!</div>';
            return;
        }
        
        commentsList.innerHTML=data.map(comment=>{
            const formattedDate=formatCommentDate(comment.created_at);
            
            return `
                <div class="comment-item">
                    <div class="comment-header">
                        <h4 class="comment-author">${escapeHtml(comment.author_name)}</h4>
                        <span class="comment-date">${formattedDate}</span>
                    </div>
                    <p class="comment-content">${escapeHtml(comment.content)}</p>
                </div>
            `;
        }).join('');
        
    }catch(err){
        console.error('Error loading comments:',err);
        document.getElementById('comments-list').innerHTML=
            '<div class="comments-error">Error loading comments. Please try again later.</div>';
    }
}

async function submitComment(){
    const nameInput=document.getElementById('comment-name');
    const contentInput=document.getElementById('comment-content');
    
    const name=nameInput.value.trim();
    const content=contentInput.value.trim();
    
    if(!name||!content){
        showMessage('Please fill in all fields','error');
        return;
    }
    
    if(name.length>100){
        showMessage('Name is too long (max 100 characters)','error');
        return;
    }
    
    if(content.length>1000){
        showMessage('Comment is too long (max 1000 characters)','error');
        return;
    }
    
    if(!currentPostId){
        showMessage('Post ID not found','error');
        return;
    }
    
    try{
        const{error}=await sb
            .from('comments')
            .insert([{
                post_id:currentPostId,
                author_name:name,
                content:content
            }]);
        
        if(error)throw error;
        
        nameInput.value='';
        contentInput.value='';
        
        showMessage('Comment posted successfully!','success');
        
        await loadComments();
        
    }catch(err){
        console.error('Error posting comment:',err);
        showMessage('Error posting comment: '+err.message,'error');
    }
}

function getShareUrl(){
    return window.location.href;
}

function getShareTitle(){
    return currentPostData ? currentPostData.title : 'Check out this post';
}

function getShareText(){
    return currentPostData ? currentPostData.content.substring(0,100)+'...' : '';
}

function shareOnTwitter(event){
    event.preventDefault();
    const url=encodeURIComponent(getShareUrl());
    const text=encodeURIComponent(getShareTitle());
    window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`,'_blank','width=600,height=400');
}

function shareOnFacebook(event){
    event.preventDefault();
    const url=encodeURIComponent(getShareUrl());
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`,'_blank','width=600,height=400');
}

function shareOnLinkedIn(event){
    event.preventDefault();
    const url=encodeURIComponent(getShareUrl());
    window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${url}`,'_blank','width=600,height=400');
}

function shareOnReddit(event){
    event.preventDefault();
    const url=encodeURIComponent(getShareUrl());
    const title=encodeURIComponent(getShareTitle());
    window.open(`https://reddit.com/submit?url=${url}&title=${title}`,'_blank','width=600,height=400');
}

function shareViaEmail(event){
    event.preventDefault();
    const subject=encodeURIComponent(getShareTitle());
    const body=encodeURIComponent(`I thought you might enjoy this: ${getShareUrl()}`);
    window.location.href=`mailto:?subject=${subject}&body=${body}`;
}

function shareOnWhatsApp(event){
    event.preventDefault();
    const text=encodeURIComponent(`${getShareTitle()} - ${getShareUrl()}`);
    window.open(`https://wa.me/?text=${text}`,'_blank','width=600,height=400');
}

function copyLink(){
    const url=getShareUrl();
    navigator.clipboard.writeText(url).then(()=>{
        showMessage('Link copied to clipboard!','success');
    }).catch(()=>{
        const textarea=document.createElement('textarea');
        textarea.value=url;
        textarea.style.position='fixed';
        textarea.style.opacity='0';
        document.body.appendChild(textarea);
        textarea.select();
        try{
            document.execCommand('copy');
            showMessage('Link copied to clipboard!','success');
        }catch(err){
            showMessage('Failed to copy link','error');
        }
        document.body.removeChild(textarea);
    });
}

function showMessage(text,type){
    const msg=document.createElement('div');
    msg.className=type;
    msg.textContent=text;
    msg.setAttribute('role','alert');
    document.body.appendChild(msg);
    setTimeout(()=>msg.remove(),3000);
}

loadTheme();
initSupabase();
</script>
</body>
</html>
