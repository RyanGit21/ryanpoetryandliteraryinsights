<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DYGKTNNN1P"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DYGKTNNN1P');
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loading... - Ryan's Poetic and Literary Insights</title>

<meta name="description" content="Read this post from Ryan's collection of poetry and literary insights.">
<meta name="keywords" content="poetry, literature, creative writing, Ryan's blog">
<meta name="author" content="Ryan">
<meta name="robots" content="index, follow">

<meta property="og:title" content="Ryan's Poetic and Literary Insights">
<meta property="og:description" content="A post from Ryan's literary collection">
<meta property="og:type" content="article">
<meta property="og:url" content="">

<script type="application/ld+json" id="schema-data">
{"@context":"https://schema.org","@type":"BlogPosting","headline":"","author":{"@type":"Person","name":"Ryan"},"datePublished":"","description":""}
</script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Georgia',serif;background:linear-gradient(135deg,#667eea,#764ba2);color:#333;line-height:1.8;min-height:100vh}
.container{max-width:900px;margin:0 auto;padding:20px}
header{text-align:center;padding:40px 20px}
header a{color:white;text-decoration:none;font-size:1.2em;display:inline-flex;align-items:center;gap:10px;background:rgba(255,255,255,0.2);padding:10px 20px;border-radius:25px}
article{background:white;border-radius:20px;padding:50px;margin:30px 0;box-shadow:0 15px 50px rgba(0,0,0,0.3)}
article.poem{background:linear-gradient(135deg,#ffecd2,#fcb69f);border-left:5px solid #ff6b6b}
article.article{border-left:5px solid #667eea}
.article-title{font-size:3em;color:#667eea;margin-bottom:15px}
.article-meta{display:flex;gap:20px;color:#999}
.article-type-badge{background:#667eea;color:white;padding:5px 15px;border-radius:20px;font-size:0.9em}
.article-content{font-size:1.2em;line-height:2;color:#444}
article.poem .article-content{white-space:pre-wrap;font-style:italic}
.loading-container{text-align:center;padding:100px;color:white}
.spinner{border:4px solid rgba(255,255,255,0.3);border-top:4px solid white;border-radius:50%;width:60px;height:60px;animation:spin 1s linear infinite;margin:0 auto 20px}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>
<div class="container">
<header>
<a href="index.html">‚Üê Back to All Posts</a>
</header>

<main id="main-content">
<div class="loading-container">
<div class="spinner"></div>
<p>Loading post...</p>
</div>
</main>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL="https://zqmgtnnwrceagkshfapq.supabase.co";
const SUPABASE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpxbWd0bm53cmNlYWdrc2hmYXBxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY3MDI2ODgsImV4cCI6MjA4MjI3ODY4OH0.Ql5KP6nfOSRzz1Z2eyN6WTqDsfVwZ0e9GKIbePa9eZE";
const sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

const params = new URLSearchParams(window.location.search);
const postId = params.get("id");

function escapeHtml(text){
  const div=document.createElement("div");
  div.textContent=text;
  return div.innerHTML;
}

function formatDate(date){
  return new Date(date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});
}

async function loadPost(){
  if(!postId){
    document.getElementById("main-content").innerHTML="<p style='color:white'>Post not found.</p>";
    return;
  }

  const {data,error} = await sb
    .from("posts")
    .select("*")
    .eq("id",postId)
    .single();

  if(error || !data){
    document.getElementById("main-content").innerHTML="<p style='color:white'>Post not found.</p>";
    return;
  }

  const content = data.type==="poem"
    ? escapeHtml(data.content)
    : data.content.split("\n\n").map(p=>`<p>${escapeHtml(p)}</p>`).join("");

  document.getElementById("main-content").innerHTML = `
    <article class="${data.type}">
      <h1 class="article-title">${escapeHtml(data.title)}</h1>
      <div class="article-meta">
        <span class="article-type-badge">${data.type}</span>
        <time>${formatDate(data.created_at)}</time>
      </div>
      <div class="article-content">${content}</div>
    </article>
  `;
}

loadPost();
</script>
</body>
</html>